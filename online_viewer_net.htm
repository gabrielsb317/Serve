<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Painel Financeiro</title>

<style>
body{
    margin:0;
    font-family:Segoe UI, sans-serif;
    background:#0f1117;
    color:#e6edf3;
    overflow-x:hidden;
}

/* CANVAS FUNDO */
#bg{
    position:fixed;
    top:0;
    left:0;
    z-index:-1;
}

/* HEADER */
header{
    padding:20px;
    text-align:center;
    font-size:24px;
    background:#161b22;
    border-bottom:1px solid #2a2f3a;
    letter-spacing:1px;
}

/* PESQUISA */
.search-box{
    padding:20px;
    text-align:center;
}

input{
    width:60%;
    padding:12px;
    border-radius:12px;
    border:none;
    background:#1e232d;
    color:#fff;
    font-size:14px;
}

input:focus{
    outline:none;
    box-shadow:0 0 20px rgba(88,166,255,0.4);
}

/* GRID */
.grid-top{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:30px;
    padding:30px;
}

@media(max-width:900px){
    .grid-top{
        grid-template-columns:1fr;
    }
}

.grid-bottom{
    display:grid;
    grid-template-columns:1fr;
    gap:30px;
    padding:0 30px 30px 30px;
}

@media(max-width:900px){
    .grid{ grid-template-columns:1fr; }
}

/* CARD */
.card{
    background:#161b22cc; /* transparência leve sem blur */
    padding:20px;
    border-radius:16px;
    box-shadow:0 10px 25px rgba(0,0,0,0.4);
    transition:transform .15s ease;
    position:relative;
    border:1px solid rgba(120,255,220,0.15);
    overflow:hidden;
}

.card::before,
.card::after{
    content:"";
    position:absolute;
    width:180px;
    height:180px;
    pointer-events:none;
    opacity:0.5;
}

.card::before{
    top:-60px;
    left:-60px;
    background:radial-gradient(circle,
        rgba(120,255,220,0.25),
        transparent 70%);
}

.card::after{
    bottom:-60px;
    right:-60px;
    background:radial-gradient(circle,
        rgba(150,200,190,0.2),
        transparent 70%);
}

.field{
    display:flex;
    justify-content:space-between;
    margin-bottom:8px;
}

.small-card{
    width:75%;
    margin:0 auto;
    padding:26px;
    transform:scale(1);
}

.small-card .field{
    margin-bottom:16px;
}

.small-card .section-title{
    font-size:15px;
}

.label{ color:#8b949e; }
.value{ color:#58a6ff; }

.section-title{
    margin-top:20px;
    margin-bottom:10px;
    font-weight:bold;
    color:#7affcf;
}

ul{ padding-left:18px; }
li{ margin-bottom:6px; }
</style>

</head>

<body>

<canvas id="bg"></canvas>

<header>Painel Financeiro</header>
<div style="text-align:center; margin-top:15px;">
    <button id="nextOperation" style="
        padding:10px 20px;
        border:none;
        border-radius:10px;
        background:#7affcf;
        color:#0f1117;
        font-weight:bold;
        cursor:pointer;
        transition:0.2s;
    ">
        Próxima Operação
    </button>
</div>
<div class="search-box">
<input type="text" id="search" placeholder="Pesquisar qualquer informação...">
</div>

<div class="grid-top">

<div class="card">

<div id="Bruto" style="font-size:26px;color:#7affcf;margin-bottom:15px;"></div>

<div class="field"><span class="label">Liquidez</span><span id="Liquidez" class="value"></span></div>
<div class="field"><span class="label">Pendente</span><span id="Pendente" class="value"></span></div>
<div class="field"><span class="label">Retirada</span><span id="Retirada" class="value"></span></div>
<div class="field"><span class="label">Juros</span><span id="juros" class="value"></span></div>
<div class="field"><span class="label">Desconto</span><span id="Desconto" class="value"></span></div>
<div class="field"><span class="label">Status</span><span id="Status" class="value"></span></div>

<div class="section-title">Atualmente</div>
<ul id="Atualmente"></ul>

<div class="section-title">Pagamentos</div>
<ul id="Pago"></ul>

<div class="section-title">Não atribuido</div>
<ul id="Atribução"></ul>

</div>

<div class="card">

<div class="section-title">Operação</div>
<div class="field"><span class="label">Tipo de Operação</span><span id="Operação" class="value"></span></div>

<div class="section-title">Dados do Titular</div>
<div class="field"><span class="label">Nome</span><span id="Titular" class="value"></span></div>
<div class="field"><span class="label">CPF</span><span id="CPF" class="value"></span></div>
<div class="field"><span class="label">Tipo</span><span id="Tipo" class="value"></span></div>
<div class="field"><span class="label">Conta</span><span id="Conta" class="value"></span></div>
<div class="field"><span class="label">Agência</span><span id="Agencia" class="value"></span></div>

<div class="section-title">Datas</div>
<div class="field"><span class="label">Solicitação</span><span id="Solicitação" class="value"></span></div>
<div class="field"><span class="label">Prazo</span><span id="Prazo" class="value"></span></div>

</div>
</div>
<div class="grid-bottom">
<!-- =========================
     CARTÃO 1
========================= -->
<div class="card small-card">
    <div class="section-title">Oportunidade por tempo limitado</div>

    <div class="field">
        <span class="label">Tipo de Operação</span>
        <span class="value">Liquidez Imediata</span>
    </div>

    <div class="field">
        <span class="label">Valor</span>
        <span class="value">R$ 250</span>
    </div>

    <div class="field">
        <span class="label">Juros</span>
        <span class="value">50%</span>
    </div>

    <div class="field">
        <span class="label">Valor a pagar</span>
        <span class="value">R$ 375</span>
    </div>

    <div class="field">
        <span class="label">Prazo</span>
        <span class="value">Até 95 dias</span>
    </div>
    
    <div class="field">
        <span class="label">Sem atribuição</span>
        <span class="value">IOF IR FGC</span>
    </div>
    
</div>

<!-- =========================
     CARTÃO 2
========================= -->
<div class="card small-card">
    <div class="section-title">Oportunidade por tempo limitado</div>

    <div class="field">
        <span class="label">Tipo de Operação</span>
        <span class="value">Liquidez Imediata Meia</span>
    </div>

    <div class="field">
        <span class="label">Valor</span>
        <span class="value">R$ 150</span>
    </div>

    <div class="field">
        <span class="label">Juros</span>
        <span class="value">40%</span>
    </div>

    <div class="field">
        <span class="label">Valor a pagar</span>
        <span class="value">R$ 210</span>
    </div>

    <div class="field">
        <span class="label">Prazo</span>
        <span class="value">Até 70 dias</span>
    </div>
    
    <div class="field">
        <span class="label">Sem atribuição</span>
        <span class="value">IOF IR FGC</span>
    </div>
</div>

<!-- =========================
     CARTÃO 3
========================= -->
<div class="card small-card">
    <div class="section-title">Oportunidade Especial</div>

    <div class="field">
        <span class="label">Tipo de Operação</span>
        <span class="value">Operação Pé de Meia</span>
    </div>

    <div class="field">
        <span class="label">Valor</span>
        <span class="value">R$ 100</span>
    </div>

    <div class="field">
        <span class="label">Juros</span>
        <span class="value">30%</span>
    </div>

    <div class="field">
        <span class="label">Valor a pagar</span>
        <span class="value">R$ 130</span>
    </div>

    <div class="field">
        <span class="label">Prazo</span>
        <span class="value">Até 60 dias</span>
    </div>
    
    <div class="field">
        <span class="label">Sem atribuição</span>
        <span class="value">IOF IR FGC</span>
    </div>
</div>
</div>

<div style="
    max-width:900px;
    margin:40px auto;
    padding:25px;
    background:linear-gradient(
        145deg,
        rgba(22,27,34,0.75),
        rgba(28,33,44,0.75)
    );
    border-radius:20px;
    border:1px solid rgba(120,255,220,0.15);
    box-shadow:0 15px 40px rgba(120,255,220,0.08);
    overflow:hidden;
">
    
    <h2 style="
        color:#7affcf;
        margin-bottom:15px;
        letter-spacing:1px;
    ">
        Sobre
    </h2>

    <p style="
        color:#8b949e;
        line-height:1.6;
        font-size:14px;
    ">
        Esta página exibe informações financeiras fornecidas pelo titular da conta.
        Não possuímos vínculo com instituições bancárias nem atuamos como banco,
        corretora ou instituição financeira.
        <br><br>
        As informações podem levar até 2 horas para serem atualizadas.
    </p>

</div>

<script>

/* =========================
   URL DO ARQUIVO .att
========================= */
const url = "https://raw.githubusercontent.com/gabrielsb317/Serve/refs/heads/main/45fadf68eec1688d123e53ed0f46e0e1.att";

/* =========================
   PARSE MULTIPLO SUPORTE {}
========================= */
function parseMultiple(text){
    const blocks = text.match(/\{[^}]+\}/g);
    if(!blocks) return [];

    return blocks.map(block=>{
        let json = {};
        let content = block.substring(1, block.length-1);
        let entries = content.split('";');

        entries.forEach(entry=>{
            let [key,value] = entry.split(':"');
            if(key && value){
                json[key.trim()] = value.replace(/"$/, "");
            }
        });

        return json;
    });
}

/* =========================
   FORMATAR DATA
========================= */
function formatDate(str){
    if(!str) return "";
    let [d,h] = str.split(";");
    if(!h) return d;
    return d + " " + h.slice(0,2)+":"+h.slice(2,4)+":"+h.slice(4);
}

/* =========================
   RENDERIZAR DADOS
========================= */
function renderData(data){

    const simpleKeys = [
        "Bruto","Liquidez","Retirada","juros","Desconto",
        "Status","Operação","Titular","CPF","Tipo",
        "Conta","Agencia","Pendente"
    ];

    simpleKeys.forEach(key=>{
        const el = document.getElementById(key);
        if(!el) return;

        if(["Bruto","Liquidez","Retirada","Pendente"].includes(key))
            el.textContent = "R$ " + (data[key] || "0");
        else if(key==="juros")
            el.textContent = (data[key] || "0") + "%";
        else
            el.textContent = data[key] || "";
    });

    document.getElementById("Atualmente").innerHTML =
        (data["Atualmente"] || "")
        .split(";")
        .filter(v=>v)
        .map(v=>"<li>R$ "+v+"</li>").join("");

    document.getElementById("Pago").innerHTML =
        (data["Pago"] || "")
        .split(",")
        .filter(p=>p)
        .map(p=>{
            let [d,h,v] = p.split(";");
            return "<li>"+formatDate(d+";"+h)+" - R$ "+v+"</li>";
        }).join("");

    document.getElementById("Atribução").innerHTML =
        (data["Atribução"] || "")
        .split(";")
        .filter(v=>v)
        .map(v=>"<li>"+v+"</li>").join("");

    document.getElementById("Solicitação").textContent =
        formatDate(data["Solicitação"]);

    document.getElementById("Prazo").textContent =
        formatDate(data["Prazo"]);
}

/* =========================
   CONTROLE MANUAL
========================= */
let operations = [];
let currentIndex = 0;

async function loadData(){
    const response = await fetch(url+"?t="+Date.now());
    const text = await response.text();
    operations = parseMultiple(text);

    if(operations.length > 0){
        renderData(operations[currentIndex]);
    }
}

document.getElementById("nextOperation").addEventListener("click", ()=>{

    if(operations.length <= 1) return;

    currentIndex++;
    if(currentIndex >= operations.length)
        currentIndex = 0;

    renderData(operations[currentIndex]);
});

loadData();
setInterval(loadData,10000);
/* =========================
   PESQUISA REAL
========================= */
const searchInput = document.getElementById("search");

searchInput.addEventListener("input", function () {

    const term = this.value.toLowerCase().trim();

    document.querySelectorAll(".card").forEach(card => {

        let foundInCard = false;

        // Seleciona campos e listas dentro do card
        const elements = card.querySelectorAll(".field, li, .section-title, div");

        elements.forEach(el => {

            const text = el.textContent.toLowerCase();

            if (term === "") {
                el.style.display = "";
            } else if (text.includes(term)) {
                el.style.display = "";
                foundInCard = true;
            } else {
                el.style.display = "none";
            }

        });

        // Se nada foi encontrado no card inteiro → esconde o card
        card.style.display = foundInCard || term === "" ? "" : "none";

    });

});
/* =========================
   EFEITO 3D
========================= */
let hueShift = 0;
setInterval(()=>{ hueShift+=1; },100);

document.querySelectorAll(".card").forEach(card=>{
    card.addEventListener("mousemove", e=>{
        const rect = card.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        const rotateX = -(y-rect.height/2)/100;
        const rotateY = (x-rect.width/2)/100;

        card.style.transform =
            `rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.03)`;

        card.style.setProperty("--mouseX", x+"px");
card.style.setProperty("--mouseY", y+"px");
    });

    card.addEventListener("mouseleave",()=>{
        card.style.transform="rotateX(0) rotateY(0) scale(1)";
    });
});

/* =========================
   FUNDO BOLHAS
========================= */
const canvas = document.getElementById("bg");
const ctx = canvas.getContext("2d");

let w,h;
function resize(){
    w = canvas.width = window.innerWidth;
    h = canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize",resize);

let bubbles=[];
for(let i=0;i<50;i++){
    bubbles.push({
        x:Math.random()*w,
        y:Math.random()*h,
        r:Math.random()*4+1,
        speed:Math.random()*0.5+0.2
    });
}

let mouse = { x: w/2, y: h/2 };

window.addEventListener("mousemove", e=>{
    mouse.x = e.clientX;
    mouse.y = e.clientY;
});

function animate(){
    ctx.clearRect(0,0,w,h);

    bubbles.forEach(b=>{

    let dx = b.x - mouse.x;
    let dy = b.y - mouse.y;
    let dist = Math.sqrt(dx*dx + dy*dy);

    if(dist < 120){
        b.x += dx/dist * 1.5;
        b.y += dy/dist * 1.5;
    }

    ctx.beginPath();
    ctx.arc(b.x,b.y,b.r,0,Math.PI*2);
    ctx.fillStyle="rgba(120,255,220,0.15)";
    ctx.fill();

    b.y -= b.speed;
    if(b.y<0){
        b.y=h;
        b.x=Math.random()*w;
    }
});

    requestAnimationFrame(animate);
}
animate();

</script>
</body>
</html>
